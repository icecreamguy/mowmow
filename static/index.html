<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Mowmowmowmowmow </title>
        <!-- Stylesheets -->
        <link rel="stylesheet"
            href="css/jquery-ui-1.9.1.custom.min.css">
        <link rel="stylesheet" 
            href="css/bootstrap.min.css" media="screen">
        <link rel="stylesheet" 
            href="css/bootstrap-responsive.css" media="screen">
        <link rel="stylesheet" href="css/mowmow.css">
    </head>
    <body>
        <div class='containter-fluid'>
            <!-- Header Row -->
            <div class="row-fluid">
                <div class="page-header">
                    <h1>Baileyface<small> Feed the Bailey!</small>
                        <div id="user_info" class="pull-right">
                            <div id="user_confirm"
                                class="label label-success hidden pull-right">
                            </div>
                            <span class="logged_in">
                                Logged in as <span id="user_name"></span>.
                                <a href="#" id="logout" class="btn-link">Log out
                                </a>
                            </span>
                        </div>
                    </h1>
                </div>
            </div>
            <div class="row-fluid">
                <!-- Navigation column -->
                <div class="span3 well-small">
                    <div class="" id="status_area"></div>
                    <hr>
                    <div class="logged_out">
                        <!-- Login Form -->
                        <form id="login_form"
                            class="small_margin_bottom logged_out">
                            <input name="email_field" type="text" placeholder="email address" class="span9">
                            <input name="pass_field" type="password" placeholder="password" class="span9">
                            <br>
                            <button name="submit" class="btn"> Login </button>
                            <button id="new_account" class="btn" data-toggle="collapse" data-target="#new-account-expander"> New Account </button>
                        </form>

                        <div id="loading_image_2">
                            <img src="img/loading.gif" alt="loading...">
                        </div>
                        <span id="user_err" class="label label-important hidden">
                        </span>
                        <hr>

                        <div id="new-account-expander" class="collapse">
                            <div id="new_account_alert" class="alert fade in hidden">
                                <h5>Please correct the following items:</h5>
                                <span id="new_account_alert_text"></span>
                                <button type="button" class="close" data-dismiss="alert">
                                    <i class="icon-remove"></i> 
                                </button>
                            </div>
                            <label>Complete the form below to create your account</label>
                            <form id="new_account_form">
                                <fieldset>
                                    <input name="name_field" type="text" placeholder="name">
                                    <input name="email_field" type="text" placeholder="email address">
                                    <input name="pass_field" type="password" placeholder="password">
                                    <input name="pass_confirm_field" type="password" placeholder="confirm password">
                                </fieldset>
            
                                <div id="tos">
                                    <p><b>Terms of service:</b><br> This website if for friends and family. Feel free to use an alias instead of your real name if you would like. I'm not going to do anything with your email address, I just think it's easier to remember an email address as opposed to a username, plus no two people will choose the same username if your username is your email address. In the future maybe I'll put in a password reset function which will use it, but as of now it's really just your username.</p>
                                    <p>I reserve the right to change these terms at any time, but under no circumstance will those changes ever include divulging your email address to any other party</p>
                                    <p>By creating an account, you agree to be bound by these pretty relaxed terms :-)</p>
                                    <button name="submit" aria-hidden="true" class="btn btn-primary">
                                        <i class="icon-check"></i> Create Account
                                    </button>
                                </div>
                            </form>
                        <hr>
                        </div>

                    </div>

                    <div class="sidebar-nav">
                        <button class="btn medium_margin_bottom btn-block" data-toggle="collapse" data-target="#about_container"> <i class='icon-question-sign'></i>
                            How Does This Site Work?
                        </button>
                        <div id="about_container" class="collapse">
                            <div class="well">
                            Bailey gets fed twice each day by an automated food
                            dish. For a two hour period leading up to her scheduled
                            meal time, you can feed her early. Getting fed early is
                            like winning the lottery for a cat. She doesn't remember
                            ever eating before. All she knows is that she is <i><b>
                            starving</b></i>. Help her live her dream, and watch how
                            excited she gets!
                            </div>
                        </div>
                        <button class="btn btn-block" data-toggle="collapse" data-target="#date-picker-container">
                            <i class='icon-calendar'></i>
                            Browse Photos by Date
                        </button>
                        <div id="date-picker-container" class="collapse">
                            <i class='icon-arrow-left'></i>
                            <a href="#" id="show_recent_photos" class="btn-link medium_margin_bottom medium_margin_top">
                                Back to most recent
                            </a>
                            <span id="date_picker"></span>
                        </div>
                    </div> 
                    <hr>
                    <div id="stats_area"></div>
                </div><!-- !Sidebar Navigation -->

                <!-- Main column for photo display -->
                <div class="span8" id="main_display">
                    <div id="loading_img">
                        Feeding the cat!
                        <img src="img/nomnom.gif" alt="loading...">
                        omnomnomnomnom...
                    </div>
                    <h2 id="photo_display_header"></h2>
                    <ul class="thumbnails" id="thumbs"></ul>
                </div><!-- !Main Column -->
            </div><!-- !Main row -->
            <div class="row-fluid" id="footer">
                <span class="span2"></span>
                <div class="span8" id="license">
                    <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><span xmlns:dct="https://purl.org/dc/terms/" property="dct:title">Baileyface images</span> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://codeplasma.com" property="cc:attributionName" rel="cc:attributionURL">Julius Schlosburg</a> are licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a><br><a href="https://github.com/icecreamguy/mowmow">Source Code on GitHub</a>
                </div>
                <span class="span2"></span>
            </div>
        </div> <!-- !Bootstrap container -->
        <div id="feedresult_modal" class="modal hidden fade" tabindex="-1" role="dialog" aria-labelledby="feedresult_label" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <i class="icon-remove"></i> 
                </button>
                <h3 id="feedresult_label">Nom Results</h3>
            </div>
            <div class="modal-body">
                <p><span id="feedresult_text"></span></p>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">
                    <i class="icon-remove"></i> Close
                </button>
            </div>
        </div>

        <div id="photo_modal" class="modal hidden fade" tabindex="-1" role="dialog" aria-labelledby="photo_label" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <i class="icon-remove"></i> 
                </button>
                <h3 id="photo_label"></h3>
            </div>
            <div class="modal-body">
                    <img id="modal_image" src="" alt="Cat nomnoming">
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">
                    <i class="icon-remove"></i> Close
                </button>
            </div>
        </div>

            <div class="modal-footer">
                <div id="loading_image_3" class="pull-left">
                    <img src="img/loading.gif" alt="loading...">
                </div>
                <button class="btn" data-dismiss="modal" aria-hidden="true">
                    <i class="icon-remove"></i> Close
                </button>
            </div>

        <!-- Templates -->
        <script id="photo_template" type="text/template">
            <li class="span3">
                <div class="thumbnail">
                    <img src="{{file_path}}/{{thumb_file_name}}" class="photo"
                        data-photo_id="{{index}}">
                        {{time_stamp}} <br> {{cycle_name}} cycle <br>
                        fed by {{name}}
                </div>
            </li>
        </script>
        
        <script id="status_template" type="text/template">
                {{#lock}}
                <p id="locked_text"><b>
                    {{#fed}}
                        Sorry, {{last_feeder}} already fed Bailey!
                        {{#baileys_hero}}
                            <p>Hooray! You're the greatest!</p>
                        {{/baileys_hero}}
                    {{/fed}}
                    {{^fed}}
                        Sorry, you can't feed Bailey this far before her next meal.
                        {{#baileys_hero}}
                            <p> You were the last person to feed Bailey. 
                            Hooray! You're the greatest!  </p>
                        {{/baileys_hero}}
                        {{^baileys_hero}}
                            <p>{{last_feeder}} fed her last.</p>
                        {{/baileys_hero}}
                    {{/fed}}
                    <p id='next_unlock_text'>
                    The next time you can feed her will be between {{next_nom_start}}
                    and {{next_nom_end}} {{tz}} {{next_start_day}}
                    </p>
                </b></p>
                {{/lock}}
                {{^lock}}
                    {{^user_name}}
                    <span id="please_logon_text"><b>
                        If you log on or create an account, you can feed her right
                        now!
                    </b></span>
                    {{/user_name}}
                    {{#user_name}}
                        <button id="take_photo_button"
                            class="btn btn-large btn-block">
                            <i class='icon-heart'></i>
                            Feed the Bailey!
                        </button>
                    {{/user_name}}
                {{/lock}}
        </script>

        <script id="new_account_alert_template" type="text/template">
            <ul>
                {{#message}}
                    <li>{{.}}</li>
                {{/message}}
            </ul>
        </script>

        <script id="stats_template" type="text/template">
            <h4>Who's fed Bailey the most?</h4>
            <ul class="unstyled well">
                {{#top_users}}
                <li><b>{{name}}</b> has fed Bailey {{count}} times.</li>
                {{/top_users}}
            </ul>
        </script>

        <!-- Saw this in the Bootstrap docs, supposedly makes the page load faster
        when the js is loaded at the end of the page.-->
        <script type="text/javascript" src="js/date.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <!-- Needed to load Bootstrap before jquery-ui or else the buttons didn't
        look right -->
        <script type="text/javascript"
            src="js/jquery-ui-1.9.1.custom.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js">
        </script>
        <script type="text/javascript" src="js/jquery.cookies.min.js">
        </script>
        <script type="text/javascript" src="js/Placeholders.min.js"></script>
        <script type="text/javascript" src="js/mustache.js"></script>
        <script type="text/javascript" src="js/mowmow.js"></script>
    </body>
</html>
